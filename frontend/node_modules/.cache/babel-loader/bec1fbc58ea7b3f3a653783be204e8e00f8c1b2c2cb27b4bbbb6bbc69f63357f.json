{"ast":null,"code":"import React,{useState}from'react';import UserSetup from'./components/UserSetup';import LoadingState from'./components/LoadingState';import ErrorState from'./components/ErrorState';import DraftView from'./components/DraftView';import useDraftData from'./hooks/useDraftData';import{ThemeProvider}from'./contexts/ThemeContext';import{jsx as _jsx}from\"react/jsx-runtime\";const App=()=>{const[currentDraft,setCurrentDraft]=useState(null);const[username,setUsername]=useState('');const[userLeagues,setUserLeagues]=useState([]);const{data,loading,refreshing,error,lastUpdated,setDraftId,refreshData}=useDraftData(currentDraft===null||currentDraft===void 0?void 0:currentDraft.draftId);const handleDraftSelected=draftInfo=>{setCurrentDraft(draftInfo);setUsername(draftInfo.username);setUserLeagues(draftInfo.leagues||[]);setDraftId(draftInfo.draftId);};const handleDraftChange=async draftInfo=>{console.log('App: handleDraftChange called with:',draftInfo);console.log('App: Previous currentDraft:',currentDraft);setCurrentDraft(prev=>{const newDraft={...prev,...draftInfo};console.log('App: New currentDraft:',newDraft);return newDraft;});setDraftId(draftInfo.draftId);// Update the backend's current draft ID\nif(draftInfo.draftId){try{console.log('App: Setting backend draft ID to:',draftInfo.draftId);const response=await fetch('/api/draft/set',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({draft_id:draftInfo.draftId})});if(!response.ok){console.error('Failed to set backend draft ID');}else{console.log('App: Successfully set backend draft ID');}}catch(error){console.error('Error setting backend draft ID:',error);}}};const handleBackToSetup=()=>{setCurrentDraft(null);setUsername('');setUserLeagues([]);};// Show user setup if no draft is selected\nif(!currentDraft){return/*#__PURE__*/_jsx(UserSetup,{onDraftSelected:handleDraftSelected});}// Loading state\nif(loading&&!data){return/*#__PURE__*/_jsx(LoadingState,{currentDraft:currentDraft,userLeagues:userLeagues,onDraftChange:handleDraftChange,onBackToSetup:handleBackToSetup,username:username});}// Error state\nif(error&&!data){return/*#__PURE__*/_jsx(ErrorState,{error:error,onRetry:refreshData,currentDraft:currentDraft,userLeagues:userLeagues,onDraftChange:handleDraftChange,onBackToSetup:handleBackToSetup,username:username});}// Main draft view\nreturn/*#__PURE__*/_jsx(DraftView,{data:data,loading:loading,refreshing:refreshing,error:error,lastUpdated:lastUpdated,onRefresh:refreshData,currentDraft:currentDraft,userLeagues:userLeagues,onDraftChange:handleDraftChange,onBackToSetup:handleBackToSetup,username:username});};// Wrap the entire App with ThemeProvider\nconst AppWithTheme=()=>/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(App,{})});export default AppWithTheme;","map":{"version":3,"names":["React","useState","UserSetup","LoadingState","ErrorState","DraftView","useDraftData","ThemeProvider","jsx","_jsx","App","currentDraft","setCurrentDraft","username","setUsername","userLeagues","setUserLeagues","data","loading","refreshing","error","lastUpdated","setDraftId","refreshData","draftId","handleDraftSelected","draftInfo","leagues","handleDraftChange","console","log","prev","newDraft","response","fetch","method","headers","body","JSON","stringify","draft_id","ok","handleBackToSetup","onDraftSelected","onDraftChange","onBackToSetup","onRetry","onRefresh","AppWithTheme","children"],"sources":["/Users/edeclan/FantasyFootballTest/SleeperLiveDraftRankings/frontend/src/App.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport UserSetup from './components/UserSetup';\nimport LoadingState from './components/LoadingState';\nimport ErrorState from './components/ErrorState';\nimport DraftView from './components/DraftView';\nimport useDraftData from './hooks/useDraftData';\nimport { ThemeProvider } from './contexts/ThemeContext';\n\nconst App = () => {\n  const [currentDraft, setCurrentDraft] = useState(null);\n  const [username, setUsername] = useState('');\n  const [userLeagues, setUserLeagues] = useState([]);\n  \n  const { data, loading, refreshing, error, lastUpdated, setDraftId, refreshData } = useDraftData(\n    currentDraft?.draftId\n  );\n\n  const handleDraftSelected = (draftInfo) => {\n    setCurrentDraft(draftInfo);\n    setUsername(draftInfo.username);\n    setUserLeagues(draftInfo.leagues || []);\n    setDraftId(draftInfo.draftId);\n  };\n\n  const handleDraftChange = async (draftInfo) => {\n    console.log('App: handleDraftChange called with:', draftInfo);\n    console.log('App: Previous currentDraft:', currentDraft);\n    \n    setCurrentDraft(prev => {\n      const newDraft = { ...prev, ...draftInfo };\n      console.log('App: New currentDraft:', newDraft);\n      return newDraft;\n    });\n    setDraftId(draftInfo.draftId);\n    \n    // Update the backend's current draft ID\n    if (draftInfo.draftId) {\n      try {\n        console.log('App: Setting backend draft ID to:', draftInfo.draftId);\n        const response = await fetch('/api/draft/set', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ draft_id: draftInfo.draftId }),\n        });\n        \n        if (!response.ok) {\n          console.error('Failed to set backend draft ID');\n        } else {\n          console.log('App: Successfully set backend draft ID');\n        }\n      } catch (error) {\n        console.error('Error setting backend draft ID:', error);\n      }\n    }\n  };\n\n  const handleBackToSetup = () => {\n    setCurrentDraft(null);\n    setUsername('');\n    setUserLeagues([]);\n  };\n\n  // Show user setup if no draft is selected\n  if (!currentDraft) {\n    return <UserSetup onDraftSelected={handleDraftSelected} />;\n  }\n\n  // Loading state\n  if (loading && !data) {\n    return (\n      <LoadingState\n        currentDraft={currentDraft}\n        userLeagues={userLeagues}\n        onDraftChange={handleDraftChange}\n        onBackToSetup={handleBackToSetup}\n        username={username}\n      />\n    );\n  }\n\n  // Error state\n  if (error && !data) {\n    return (\n      <ErrorState\n        error={error}\n        onRetry={refreshData}\n        currentDraft={currentDraft}\n        userLeagues={userLeagues}\n        onDraftChange={handleDraftChange}\n        onBackToSetup={handleBackToSetup}\n        username={username}\n      />\n    );\n  }\n\n  // Main draft view\n  return (\n    <DraftView\n      data={data}\n      loading={loading}\n      refreshing={refreshing}\n      error={error}\n      lastUpdated={lastUpdated}\n      onRefresh={refreshData}\n      currentDraft={currentDraft}\n      userLeagues={userLeagues}\n      onDraftChange={handleDraftChange}\n      onBackToSetup={handleBackToSetup}\n      username={username}\n    />\n  );\n};\n\n// Wrap the entire App with ThemeProvider\nconst AppWithTheme = () => (\n  <ThemeProvider>\n    <App />\n  </ThemeProvider>\n);\n\nexport default AppWithTheme;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}